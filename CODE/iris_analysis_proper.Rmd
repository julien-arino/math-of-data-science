---
title: "Iris Dataset Analysis - Proper Documentation"
author: "Data Analyst"
date: "`r Sys.Date()`"
output: 
  html_document:
    toc: true
    toc_float: true
    theme: united
    highlight: tango
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE, fig.width = 10, fig.height = 6)
```

## Introduction

This document presents a comprehensive analysis of the famous **Iris dataset**, which contains measurements of three species of iris flowers. The dataset was collected by botanist Edgar Anderson and made famous by statistician Ronald Fisher in 1936.

The dataset contains 150 observations of iris flowers, with 50 samples from each of three species:
- *Iris setosa*
- *Iris versicolor* 
- *Iris virginica*

For each flower, four measurements were recorded:
- **Sepal Length** (in centimeters)
- **Sepal Width** (in centimeters)
- **Petal Length** (in centimeters)
- **Petal Width** (in centimeters)

## Data Loading and Initial Exploration

We begin by loading the necessary libraries and examining the structure of our dataset.

```{r libraries}
library(dplyr)
library(ggplot2)
library(corrplot)
library(GGally)
library(knitr)
library(plotly)
```

```{r load-data}
data(iris)
head(iris)
```

Let's examine the basic structure and summary statistics of our dataset:

```{r data-structure}
str(iris)
summary(iris)
```

## Data Quality Assessment

Before proceeding with our analysis, it's important to check for any data quality issues such as missing values or outliers.

```{r data-quality}
# Check for missing values
sum(is.na(iris))

# Check for duplicate rows
sum(duplicated(iris))

# Basic descriptive statistics by species
iris %>%
  group_by(Species) %>%
  summarise(
    count = n(),
    avg_sepal_length = mean(Sepal.Length),
    avg_sepal_width = mean(Sepal.Width),
    avg_petal_length = mean(Petal.Length),
    avg_petal_width = mean(Petal.Width)
  ) %>%
  kable(digits = 2, caption = "Summary Statistics by Species")
```

Excellent! Our dataset is complete with no missing values or duplicates. Each species is equally represented with 50 observations each.

## Exploratory Data Analysis

### Distribution of Individual Variables

Let's examine the distribution of each measurement across all species:

```{r distributions}
# Create histograms for each measurement
p1 <- ggplot(iris, aes(x = Sepal.Length, fill = Species)) +
  geom_histogram(alpha = 0.7, bins = 15) +
  labs(title = "Distribution of Sepal Length", x = "Sepal Length (cm)", y = "Frequency") +
  theme_minimal()

p2 <- ggplot(iris, aes(x = Sepal.Width, fill = Species)) +
  geom_histogram(alpha = 0.7, bins = 15) +
  labs(title = "Distribution of Sepal Width", x = "Sepal Width (cm)", y = "Frequency") +
  theme_minimal()

p3 <- ggplot(iris, aes(x = Petal.Length, fill = Species)) +
  geom_histogram(alpha = 0.7, bins = 15) +
  labs(title = "Distribution of Petal Length", x = "Petal Length (cm)", y = "Frequency") +
  theme_minimal()

p4 <- ggplot(iris, aes(x = Petal.Width, fill = Species)) +
  geom_histogram(alpha = 0.7, bins = 15) +
  labs(title = "Distribution of Petal Width", x = "Petal Width (cm)", y = "Frequency") +
  theme_minimal()

gridExtra::grid.arrange(p1, p2, p3, p4, ncol = 2)
```

The histograms reveal interesting patterns. Petal measurements show more distinct separation between species compared to sepal measurements.

### Box Plot Analysis

Box plots provide an excellent way to compare the distributions of measurements across different species:

```{r boxplots}
# Create box plots for each measurement
iris_long <- iris %>%
  tidyr::gather(key = "Measurement", value = "Value", -Species)

ggplot(iris_long, aes(x = Species, y = Value, fill = Species)) +
  geom_boxplot(alpha = 0.7) +
  facet_wrap(~Measurement, scales = "free_y") +
  labs(title = "Distribution of Measurements by Species", 
       x = "Species", y = "Measurement Value (cm)") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

The box plots clearly show that:
- **Setosa** has the smallest petal measurements but wider sepals
- **Virginica** generally has the largest measurements across all variables
- **Versicolor** falls between the other two species in most measurements

## Correlation Analysis

Understanding the relationships between different measurements is crucial for our analysis.

```{r correlation}
# Calculate correlation matrix
cor_matrix <- cor(iris[, 1:4])
print(cor_matrix)

# Create correlation plot
corrplot(cor_matrix, method = "color", type = "upper", 
         order = "hclust", tl.cex = 0.8, tl.col = "black")
```

The correlation analysis reveals strong positive correlations, particularly between:
- Petal length and petal width (r = 0.96)
- Petal length and sepal length (r = 0.87)
- Petal width and sepal length (r = 0.82)

This suggests that flowers with longer petals tend to have wider petals and longer sepals.

## Advanced Visualization

### Scatter Plot Matrix

A scatter plot matrix helps us visualize relationships between all pairs of variables:

```{r scatterplot-matrix}
ggpairs(iris, aes(color = Species), 
        columns = 1:4,
        title = "Scatter Plot Matrix of Iris Measurements") +
  theme_minimal()
```

The scatter plot matrix confirms our earlier observations and shows clear clustering of species, especially when looking at petal measurements.

### 3D Visualization

Let's create an interactive 3D plot to explore the relationship between three key measurements:

```{r 3d-plot}
plot_3d <- plot_ly(iris, x = ~Sepal.Length, y = ~Petal.Length, z = ~Petal.Width,
                   color = ~Species, colors = c("red", "green", "blue"),
                   marker = list(size = 5)) %>%
  add_markers() %>%
  layout(title = "3D Scatter Plot of Iris Measurements",
         scene = list(xaxis = list(title = "Sepal Length (cm)"),
                     yaxis = list(title = "Petal Length (cm)"),
                     zaxis = list(title = "Petal Width (cm)")))

plot_3d
```

## Statistical Analysis

### Analysis of Variance (ANOVA)

We'll perform ANOVA tests to determine if there are significant differences between species for each measurement:

```{r anova}
# ANOVA for each measurement
anova_results <- list()

measurements <- c("Sepal.Length", "Sepal.Width", "Petal.Length", "Petal.Width")

for (measure in measurements) {
  formula_str <- paste(measure, "~ Species")
  anova_result <- aov(as.formula(formula_str), data = iris)
  anova_results[[measure]] <- summary(anova_result)
  cat("ANOVA for", measure, ":\n")
  print(anova_results[[measure]])
  cat("\n")
}
```

All ANOVA tests show highly significant differences (p < 0.001) between species for all measurements, confirming that species is a strong predictor of flower morphology.

### Principal Component Analysis (PCA)

PCA helps us understand which combinations of measurements explain the most variance in our data:

```{r pca}
# Perform PCA
pca_result <- prcomp(iris[, 1:4], scale. = TRUE)

# Summary of PCA
summary(pca_result)

# Create PCA biplot
pca_data <- data.frame(pca_result$x, Species = iris$Species)

ggplot(pca_data, aes(x = PC1, y = PC2, color = Species)) +
  geom_point(size = 3, alpha = 0.7) +
  stat_ellipse() +
  labs(title = "PCA Biplot of Iris Dataset",
       x = paste("PC1 (", round(summary(pca_result)$importance[2,1]*100, 1), "% variance)", sep=""),
       y = paste("PC2 (", round(summary(pca_result)$importance[2,2]*100, 1), "% variance)", sep="")) +
  theme_minimal()
```

The PCA analysis shows that:
- The first two principal components explain 95.8% of the total variance
- PC1 primarily represents overall flower size
- PC2 distinguishes between sepal and petal proportions

## Predictive Modeling

### Linear Discriminant Analysis (LDA)

We'll build a simple classification model to predict species based on measurements:

```{r lda}
library(MASS)

# Split data into training and testing sets
set.seed(123)
train_indices <- sample(1:nrow(iris), 0.7 * nrow(iris))
train_data <- iris[train_indices, ]
test_data <- iris[-train_indices, ]

# Fit LDA model
lda_model <- lda(Species ~ ., data = train_data)

# Make predictions
predictions <- predict(lda_model, test_data)

# Calculate accuracy
accuracy <- mean(predictions$class == test_data$Species)
cat("LDA Model Accuracy:", round(accuracy * 100, 2), "%\n")

# Confusion matrix
confusion_matrix <- table(Predicted = predictions$class, Actual = test_data$Species)
print(confusion_matrix)
```

Our Linear Discriminant Analysis model achieves excellent classification accuracy, demonstrating that the four measurements are highly predictive of species.

## Conclusions

This comprehensive analysis of the Iris dataset reveals several key findings:

1. **Species Differentiation**: The three iris species show distinct morphological characteristics, with petal measurements being particularly discriminative.

2. **Measurement Relationships**: Strong positive correlations exist between most measurements, indicating that larger flowers tend to be larger across all dimensions.

3. **Statistical Significance**: ANOVA tests confirm highly significant differences between species for all measurements.

4. **Dimensionality**: PCA reveals that 95.8% of the variance can be explained by just two principal components, suggesting the data has inherently lower dimensionality.

5. **Predictive Power**: The measurements provide excellent predictive power for species classification, as demonstrated by our LDA model.

This analysis demonstrates the effectiveness of combining exploratory data analysis, statistical testing, and predictive modeling to gain comprehensive insights from a dataset. The Iris dataset, despite its simplicity, provides rich opportunities for understanding fundamental concepts in data science and statistics.

---

*This analysis was conducted using R version `r R.version.string` with various statistical and visualization packages.*
